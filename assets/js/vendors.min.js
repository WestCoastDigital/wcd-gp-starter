"use strict";!function(t){var a={init:function(a,e){var o=this;if(o.dom=t("body"),o.$elem=t(e),o.options=t.extend({},t.fn.modaal.options,o.$elem.data(),a),o.xhr=null,o.scope={is_open:!1,id:"modaal_"+(new Date).getTime()+Math.random().toString(16).substring(2),source:o.options.content_source?o.options.content_source:o.$elem.attr("href")},o.$elem.attr("data-modaal-scope",o.scope.id),o.private_options={active_class:"is_active"},o.lastFocus=null,o.options.is_locked||"confirm"==o.options.type||o.options.hide_close?o.scope.close_btn="":o.scope.close_btn='<button type="button" class="modaal-close" id="modaal-close" aria-label="'+o.options.close_aria_label+'"><span>'+o.options.close_text+"</span></button>","none"===o.options.animation&&(o.options.animation_speed=0,o.options.after_callback_delay=0),t(e).on("click.Modaal",function(t){t.preventDefault(),o.create_modaal(o,t)}),!0===o.options.outer_controls)var i="outer";else i="inner";o.scope.prev_btn='<button type="button" class="modaal-gallery-control modaal-gallery-prev modaal-gallery-prev-'+i+'" id="modaal-gallery-prev" aria-label="Previous image (use left arrow to change)"><span>Previous Image</span></button>',o.scope.next_btn='<button type="button" class="modaal-gallery-control modaal-gallery-next modaal-gallery-next-'+i+'" id="modaal-gallery-next" aria-label="Next image (use right arrow to change)"><span>Next Image</span></button>',!0===o.options.start_open&&o.create_modaal(o)},create_modaal:function(t,a){var e;if((t=this).lastFocus=t.$elem,!1!==t.options.should_open&&("function"!=typeof t.options.should_open||!1!==t.options.should_open())){switch(t.options.before_open.call(t,a),t.options.type){case"inline":t.create_basic();break;case"ajax":e=t.options.source(t.$elem,t.scope.source),t.fetch_ajax(e);break;case"confirm":t.options.is_locked=!0,t.create_confirm();break;case"image":t.create_image();break;case"iframe":e=t.options.source(t.$elem,t.scope.source),t.create_iframe(e);break;case"video":t.create_video(t.scope.source);break;case"instagram":t.create_instagram()}t.watch_events()}},watch_events:function(){var a=this;a.dom.off("click.Modaal keyup.Modaal keydown.Modaal"),a.dom.on("keydown.Modaal",function(e){var o=e.keyCode,i=e.target;9==o&&a.scope.is_open&&(t.contains(document.getElementById(a.scope.id),i)||t("#"+a.scope.id).find('*[tabindex="0"]').focus())}),a.dom.on("keyup.Modaal",function(e){var o=e.keyCode,i=e.target;return e.shiftKey&&9==e.keyCode&&a.scope.is_open&&(t.contains(document.getElementById(a.scope.id),i)||t("#"+a.scope.id).find(".modaal-close").focus()),!a.options.is_locked&&27==o&&a.scope.is_open?!t(document.activeElement).is("input:not(:checkbox):not(:radio)")&&void a.modaal_close():"image"==a.options.type?(37==o&&a.scope.is_open&&!t("#"+a.scope.id+" .modaal-gallery-prev").hasClass("is_hidden")&&a.gallery_update("prev"),void(39==o&&a.scope.is_open&&!t("#"+a.scope.id+" .modaal-gallery-next").hasClass("is_hidden")&&a.gallery_update("next"))):void 0}),a.dom.on("click.Modaal",function(e){var o=t(e.target);if(a.options.is_locked||!(a.options.overlay_close&&o.is(".modaal-inner-wrapper")||o.is(".modaal-close")||o.closest(".modaal-close").length)){if(o.is(".modaal-confirm-btn"))return o.is(".modaal-ok")&&a.options.confirm_callback.call(a,a.lastFocus),o.is(".modaal-cancel")&&a.options.confirm_cancel_callback.call(a,a.lastFocus),void a.modaal_close();if(o.is(".modaal-gallery-control")){if(o.hasClass("is_hidden"))return;return o.is(".modaal-gallery-prev")&&a.gallery_update("prev"),void(o.is(".modaal-gallery-next")&&a.gallery_update("next"))}}else a.modaal_close()})},build_modal:function(a){var e=this,o="";"instagram"==e.options.type&&(o=" modaal-instagram");var i,n="video"==e.options.type?"modaal-video-wrap":"modaal-content";switch(e.options.animation){case"fade":i=" modaal-start_fade";break;case"slide-down":i=" modaal-start_slidedown";break;default:i=" modaal-start_none"}var s="";e.options.fullscreen&&(s=" modaal-fullscreen"),""===e.options.custom_class&&void 0===e.options.custom_class||(e.options.custom_class=" "+e.options.custom_class);var r="";e.options.width&&e.options.height&&"number"==typeof e.options.width&&"number"==typeof e.options.height?r=' style="max-width:'+e.options.width+"px;height:"+e.options.height+'px;overflow:auto;"':e.options.width&&"number"==typeof e.options.width?r=' style="max-width:'+e.options.width+'px;"':e.options.height&&"number"==typeof e.options.height&&(r=' style="height:'+e.options.height+'px;overflow:auto;"'),("image"==e.options.type||"video"==e.options.type||"instagram"==e.options.type||e.options.fullscreen)&&(r="");var l="";e.is_touch()&&(l=' style="cursor:pointer;"');var d='<div class="modaal-wrapper modaal-'+e.options.type+i+o+s+e.options.custom_class+'" id="'+e.scope.id+'"><div class="modaal-outer-wrapper"><div class="modaal-inner-wrapper"'+l+">";"video"!=e.options.type&&(d+='<div class="modaal-container"'+r+">"),d+='<div class="'+n+' modaal-focus" aria-hidden="false" aria-label="'+e.options.accessible_title+" - "+e.options.close_aria_label+'" role="dialog">',"inline"==e.options.type?d+='<div class="modaal-content-container" role="document"></div>':d+=a,d+="</div>"+e.scope.close_btn,"video"!=e.options.type&&(d+="</div>"),d+="</div>","image"==e.options.type&&!0===e.options.outer_controls&&(d+=e.scope.prev_btn+e.scope.next_btn),d+="</div></div>",t("#"+e.scope.id+"_overlay").length<1&&e.dom.append(d),"inline"==e.options.type&&a.appendTo("#"+e.scope.id+" .modaal-content-container"),e.modaal_overlay("show")},create_basic:function(){var a=t(this.scope.source),e="";a.length?(e=a.contents().detach(),a.empty()):e="Content could not be loaded. Please check the source and try again.",this.build_modal(e)},create_instagram:function(){var a=this,e=a.options.instagram_id,o="",i="Instagram photo couldn't be loaded, please check the embed code and try again.";if(a.build_modal('<div class="modaal-content-container'+(""!=a.options.loading_class?" "+a.options.loading_class:"")+'">'+a.options.loading_content+"</div>"),""!=e&&null!==e&&void 0!==e){var n="https://api.instagram.com/oembed?url=http://instagr.am/p/"+e+"/";t.ajax({url:n,dataType:"jsonp",cache:!1,success:function(e){a.dom.append('<div id="temp-ig" style="width:0;height:0;overflow:hidden;">'+e.html+"</div>"),a.dom.attr("data-igloaded")?window.instgrm.Embeds.process():a.dom.attr("data-igloaded","true");var o="#"+a.scope.id+" .modaal-content-container";t(o).length>0&&setTimeout(function(){t("#temp-ig").contents().clone().appendTo(o),t("#temp-ig").remove()},1e3)},error:function(){o=i;var e=t("#"+a.scope.id+" .modaal-content-container");e.length>0&&(e.removeClass(a.options.loading_class).addClass(a.options.ajax_error_class),e.html(o))}})}else o=i;return!1},fetch_ajax:function(a){var e=this;null==e.options.accessible_title&&(e.options.accessible_title="Dialog Window"),null!==e.xhr&&(e.xhr.abort(),e.xhr=null),e.build_modal('<div class="modaal-content-container'+(""!=e.options.loading_class?" "+e.options.loading_class:"")+'">'+e.options.loading_content+"</div>"),e.xhr=t.ajax(a,{success:function(a){var o=t("#"+e.scope.id).find(".modaal-content-container");o.length>0&&(o.removeClass(e.options.loading_class),o.html(a),e.options.ajax_success.call(e,o))},error:function(a){if("abort"!=a.statusText){var o=t("#"+e.scope.id+" .modaal-content-container");o.length>0&&(o.removeClass(e.options.loading_class).addClass(e.options.ajax_error_class),o.html("Content could not be loaded. Please check the source and try again."))}}})},create_confirm:function(){var t;t='<div class="modaal-content-container"><h1 id="modaal-title">'+this.options.confirm_title+'</h1><div class="modaal-confirm-content">'+this.options.confirm_content+'</div><div class="modaal-confirm-wrap"><button type="button" class="modaal-confirm-btn modaal-ok" aria-label="Confirm">'+this.options.confirm_button_text+'</button><button type="button" class="modaal-confirm-btn modaal-cancel" aria-label="Cancel">'+this.options.confirm_cancel_button_text+"</button></div></div></div>",this.build_modal(t)},create_image:function(){var a,e,o=this,i="";if(o.$elem.is("[data-group]")||o.$elem.is("[rel]")){var n=o.$elem.is("[data-group]"),s=n?o.$elem.attr("data-group"):o.$elem.attr("rel"),r=t(n?'[data-group="'+s+'"]':'[rel="'+s+'"]');r.removeAttr("data-gallery-active","is_active"),o.$elem.attr("data-gallery-active","is_active"),e=r.length-1;var l=[];i='<div class="modaal-gallery-item-wrap">',r.each(function(a,e){var o="",i="",n="",s=!1,r=!1,d=e.getAttribute("data-modaal-desc"),c=e.getAttribute("data-gallery-active");t(e).attr("data-modaal-content-source")?o=t(e).attr("data-modaal-content-source"):t(e).attr("href")?o=t(e).attr("href"):t(e).attr("src")?o=t(e).attr("src"):(o="trigger requires href or data-modaal-content-source attribute",r=!0),""!=d&&null!==d&&void 0!==d?(i=d,n='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(a+1)+" - </span>"+d+"</div>"):n='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image '+(a+1)+"</span></div>",c&&(s=!0);var p={url:o,alt:i,rawdesc:d,desc:n,active:s,src_error:r};l.push(p)});for(var d=0;d<l.length;d++){var c="",p=l[d].rawdesc?"Image: "+l[d].rawdesc:"Image "+d+" no description";l[d].active&&(c=" "+o.private_options.active_class);i+='<div class="modaal-gallery-item gallery-item-'+d+c+'" aria-label="'+p+'">'+(l[d].src_error?l[d].url:'<img src="'+l[d].url+'" alt=" " style="width:100%">')+l[d].desc+"</div>"}i+="</div>",1!=o.options.outer_controls&&(i+=o.scope.prev_btn+o.scope.next_btn)}else{var m,u=!1;o.$elem.attr("data-modaal-content-source")?m=o.$elem.attr("data-modaal-content-source"):o.$elem.attr("href")?m=o.$elem.attr("href"):o.$elem.attr("src")?m=o.$elem.attr("src"):(m="trigger requires href or data-modaal-content-source attribute",u=!0);var h="";p="";o.$elem.attr("data-modaal-desc")?(p=o.$elem.attr("data-modaal-desc"),h='<div class="modaal-gallery-label"><span class="modaal-accessible-hide">Image - </span>'+o.$elem.attr("data-modaal-desc")+"</div>"):p="Image with no description";i='<div class="modaal-gallery-item is_active" aria-label="'+p+'">'+(u?m:'<img src="'+m+'" alt=" " style="width:100%">')+h+"</div>"}a=i,o.build_modal(a),t(".modaal-gallery-item.is_active").is(".gallery-item-0")&&t(".modaal-gallery-prev").hide(),t(".modaal-gallery-item.is_active").is(".gallery-item-"+e)&&t(".modaal-gallery-next").hide()},gallery_update:function(a){var e=this,o=t("#"+e.scope.id),i=o.find(".modaal-gallery-item").length-1;if(0==i)return!1;var n=o.find(".modaal-gallery-prev"),s=o.find(".modaal-gallery-next"),r=0,l=0,d=o.find(".modaal-gallery-item."+e.private_options.active_class),c="next"==a?d.next(".modaal-gallery-item"):d.prev(".modaal-gallery-item");return e.options.before_image_change.call(e,d,c),("prev"!=a||!o.find(".gallery-item-0").hasClass("is_active"))&&(("next"!=a||!o.find(".gallery-item-"+i).hasClass("is_active"))&&void d.stop().animate({opacity:0},250,function(){c.addClass("is_next").css({position:"absolute",display:"block",opacity:0});var a=t(document).width(),p=a>1140?280:50;r=o.find(".modaal-gallery-item.is_next").width(),l=o.find(".modaal-gallery-item.is_next").height();var m=o.find(".modaal-gallery-item.is_next img").prop("naturalWidth"),u=o.find(".modaal-gallery-item.is_next img").prop("naturalHeight");m>a-p?(r=a-p,o.find(".modaal-gallery-item.is_next").css({width:r}),o.find(".modaal-gallery-item.is_next img").css({width:r}),l=o.find(".modaal-gallery-item.is_next").find("img").height()):(r=m,l=u),o.find(".modaal-gallery-item-wrap").stop().animate({width:r,height:l},250,function(){d.removeClass(e.private_options.active_class+" "+e.options.gallery_active_class).removeAttr("style"),d.find("img").removeAttr("style"),c.addClass(e.private_options.active_class+" "+e.options.gallery_active_class).removeClass("is_next").css("position",""),c.stop().animate({opacity:1},250,function(){t(this).removeAttr("style").css({width:"100%"}),t(this).find("img").css("width","100%"),o.find(".modaal-gallery-item-wrap").removeAttr("style"),e.options.after_image_change.call(e,c)}),o.find(".modaal-gallery-item").removeAttr("tabindex"),o.find(".modaal-gallery-item."+e.private_options.active_class).attr("tabindex","0").focus(),o.find(".modaal-gallery-item."+e.private_options.active_class).is(".gallery-item-0")?n.stop().animate({opacity:0},150,function(){t(this).hide()}):n.stop().css({display:"block",opacity:n.css("opacity")}).animate({opacity:1},150),o.find(".modaal-gallery-item."+e.private_options.active_class).is(".gallery-item-"+i)?s.stop().animate({opacity:0},150,function(){t(this).hide()}):s.stop().css({display:"block",opacity:n.css("opacity")}).animate({opacity:1},150)})}))},create_video:function(t){var a;a='<iframe src="'+t+'" class="modaal-video-frame" frameborder="0" allowfullscreen></iframe>',this.build_modal('<div class="modaal-video-container">'+a+"</div>")},create_iframe:function(t){var a;a=null!==this.options.width||void 0!==this.options.width||null!==this.options.height||void 0!==this.options.height?'<iframe src="'+t+'" class="modaal-iframe-elem" frameborder="0" allowfullscreen></iframe>':'<div class="modaal-content-container">Please specify a width and height for your iframe</div>',this.build_modal(a)},modaal_open:function(){var a=this,e=t("#"+a.scope.id),o=a.options.animation;"none"===o&&(e.removeClass("modaal-start_none"),a.options.after_open.call(a,e)),"fade"===o&&e.removeClass("modaal-start_fade"),"slide-down"===o&&e.removeClass("modaal-start_slide_down");t(".modaal-wrapper *[tabindex=0]").removeAttr("tabindex"),("image"==a.options.type?t("#"+a.scope.id).find(".modaal-gallery-item."+a.private_options.active_class):e.find(".modaal-iframe-elem").length?e.find(".modaal-iframe-elem"):e.find(".modaal-video-wrap").length?e.find(".modaal-video-wrap"):e.find(".modaal-focus")).attr("tabindex","0").focus(),"none"!==o&&setTimeout(function(){a.options.after_open.call(a,e)},a.options.after_callback_delay)},modaal_close:function(){var a=this,e=t("#"+a.scope.id);a.options.before_close.call(a,e),null!==a.xhr&&(a.xhr.abort(),a.xhr=null),"none"===a.options.animation&&e.addClass("modaal-start_none"),"fade"===a.options.animation&&e.addClass("modaal-start_fade"),"slide-down"===a.options.animation&&e.addClass("modaal-start_slide_down"),setTimeout(function(){"inline"==a.options.type&&t("#"+a.scope.id+" .modaal-content-container").contents().detach().appendTo(a.scope.source),e.remove(),a.options.after_close.call(a),a.scope.is_open=!1},a.options.after_callback_delay),a.modaal_overlay("hide"),null!=a.lastFocus&&a.lastFocus.focus()},modaal_overlay:function(a){var e=this;"show"==a?(e.scope.is_open=!0,e.options.background_scroll||e.dom.addClass("modaal-noscroll"),t("#"+e.scope.id+"_overlay").length<1&&e.dom.append('<div class="modaal-overlay" id="'+e.scope.id+'_overlay"></div>'),t("#"+e.scope.id+"_overlay").css("background",e.options.background).stop().animate({opacity:e.options.overlay_opacity},e.options.animation_speed,function(){e.modaal_open()})):"hide"==a&&t("#"+e.scope.id+"_overlay").stop().animate({opacity:0},e.options.animation_speed,function(){t(this).remove(),e.dom.removeClass("modaal-noscroll")})},is_touch:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},e=[];t.fn.modaal=function(o){return this.each(function(i){var n=t(this).data("modaal");if(n){if("string"==typeof o)switch(o){case"open":n.create_modaal(n);break;case"close":n.modaal_close()}}else{var s=Object.create(a);s.init(o,this),t.data(this,"modaal",s),e.push({element:t(this).attr("class"),options:o})}})},t.fn.modaal.options={type:"inline",content_source:null,animation:"fade",animation_speed:300,after_callback_delay:350,is_locked:!1,hide_close:!1,background:"#000",overlay_opacity:"0.8",overlay_close:!0,accessible_title:"Dialog Window",start_open:!1,fullscreen:!1,custom_class:"",background_scroll:!1,should_open:!0,close_text:"Close",close_aria_label:"Close (Press escape to close)",width:null,height:null,before_open:function(){},after_open:function(){},before_close:function(){},after_close:function(){},source:function(t,a){return a},confirm_button_text:"Confirm",confirm_cancel_button_text:"Cancel",confirm_title:"Confirm Title",confirm_content:"<p>This is the default confirm dialog content. Replace me through the options</p>",confirm_callback:function(){},confirm_cancel_callback:function(){},gallery_active_class:"gallery_active_item",outer_controls:!1,before_image_change:function(t,a){},after_image_change:function(t){},loading_content:'<div class="modaal-loading-spinner"><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div>',loading_class:"is_loading",ajax_error_class:"modaal-error",ajax_success:function(){},instagram_id:null};function o(t){var a={},e=!1;t.attr("data-modaal-type")&&(e=!0,a.type=t.attr("data-modaal-type")),t.attr("data-modaal-content-source")&&(e=!0,a.content_source=t.attr("data-modaal-content-source")),t.attr("data-modaal-animation")&&(e=!0,a.animation=t.attr("data-modaal-animation")),t.attr("data-modaal-animation-speed")&&(e=!0,a.animation_speed=t.attr("data-modaal-animation-speed")),t.attr("data-modaal-after-callback-delay")&&(e=!0,a.after_callback_delay=t.attr("data-modaal-after-callback-delay")),t.attr("data-modaal-is-locked")&&(e=!0,a.is_locked="true"===t.attr("data-modaal-is-locked")),t.attr("data-modaal-hide-close")&&(e=!0,a.hide_close="true"===t.attr("data-modaal-hide-close")),t.attr("data-modaal-background")&&(e=!0,a.background=t.attr("data-modaal-background")),t.attr("data-modaal-overlay-opacity")&&(e=!0,a.overlay_opacity=t.attr("data-modaal-overlay-opacity")),t.attr("data-modaal-overlay-close")&&(e=!0,a.overlay_close="false"!==t.attr("data-modaal-overlay-close")),t.attr("data-modaal-accessible-title")&&(e=!0,a.accessible_title=t.attr("data-modaal-accessible-title")),t.attr("data-modaal-start-open")&&(e=!0,a.start_open="true"===t.attr("data-modaal-start-open")),t.attr("data-modaal-fullscreen")&&(e=!0,a.fullscreen="true"===t.attr("data-modaal-fullscreen")),t.attr("data-modaal-custom-class")&&(e=!0,a.custom_class=t.attr("data-modaal-custom-class")),t.attr("data-modaal-close-text")&&(e=!0,a.close_text=t.attr("data-modaal-close-text")),t.attr("data-modaal-close-aria-label")&&(e=!0,a.close_aria_label=t.attr("data-modaal-close-aria-label")),t.attr("data-modaal-background-scroll")&&(e=!0,a.background_scroll="true"===t.attr("data-modaal-background-scroll")),t.attr("data-modaal-width")&&(e=!0,a.width=parseInt(t.attr("data-modaal-width"))),t.attr("data-modaal-height")&&(e=!0,a.height=parseInt(t.attr("data-modaal-height"))),t.attr("data-modaal-confirm-button-text")&&(e=!0,a.confirm_button_text=t.attr("data-modaal-confirm-button-text")),t.attr("data-modaal-confirm-cancel-button-text")&&(e=!0,a.confirm_cancel_button_text=t.attr("data-modaal-confirm-cancel-button-text")),t.attr("data-modaal-confirm-title")&&(e=!0,a.confirm_title=t.attr("data-modaal-confirm-title")),t.attr("data-modaal-confirm-content")&&(e=!0,a.confirm_content=t.attr("data-modaal-confirm-content")),t.attr("data-modaal-gallery-active-class")&&(e=!0,a.gallery_active_class=t.attr("data-modaal-gallery-active-class")),t.attr("data-modaal-loading-content")&&(e=!0,a.loading_content=t.attr("data-modaal-loading-content")),t.attr("data-modaal-loading-class")&&(e=!0,a.loading_class=t.attr("data-modaal-loading-class")),t.attr("data-modaal-ajax-error-class")&&(e=!0,a.ajax_error_class=t.attr("data-modaal-ajax-error-class")),t.attr("data-modaal-instagram-id")&&(e=!0,a.instagram_id=t.attr("data-modaal-instagram-id")),e&&t.modaal(a)}t(function(){var a=t(".modaal");a.length&&a.each(function(){o(t(this))});var i=new MutationObserver(function(a){a.forEach(function(a){if(a.addedNodes&&a.addedNodes.length>0)[].some.call(a.addedNodes,function(a){var i=t(a);(i.is("a")||i.is("button"))&&(i.hasClass("modaal")?o(i):e.forEach(function(a){if(a.element==i.attr("class"))return t(i).modaal(a.options),!1}))})})}),n={subtree:!0,attributes:!0,childList:!0,characterData:!0};setTimeout(function(){i.observe(document.body,n)},500)})}(jQuery,window,document),function(){window.addEventListener("scroll",function(t){var a,e,o,i,n,s;for(n=this.pageYOffset,a=0,i=(o=document.querySelectorAll("[data-type='parallax']")).length;a<i;a++)s="translate3d(0, "+-n*(e=o[a]).getAttribute("data-depth")+"px, 0)",e.style["-webkit-transform"]=s,e.style["-moz-transform"]=s,e.style["-ms-transform"]=s,e.style["-o-transform"]=s,e.style.transform=s})}.call(void 0),jQuery(function(){(function(){var t,a;t=this.jQuery||window.jQuery,a=t(window),t.fn.stick_in_parent=function(e){var o,i,n,s,r,l,d,c,p,m,u,h;for(null==e&&(e={}),h=e.sticky_class,l=e.inner_scrolling,u=e.recalc_every,m=e.parent,p=e.offset_top,c=e.spacer,n=e.bottoming,null==p&&(p=0),null==m&&(m=void 0),null==l&&(l=!0),null==h&&(h="is_stuck"),o=t(document),null==n&&(n=!0),s=function(e,i,s,r,d,f,g,v){var y,_,w,b,x,k,C,A,S,T,j,z;if(!e.data("sticky_kit")){if(e.data("sticky_kit",!0),x=o.height(),C=e.parent(),null!=m&&(C=C.closest(m)),!C.length)throw"failed to find stick parent";if(w=!1,y=!1,(j=null!=c?c&&e.closest(c):t("<div />"))&&j.css("position",e.css("position")),(A=function(){var t,a,n;if(!v)return x=o.height(),t=parseInt(C.css("border-top-width"),10),a=parseInt(C.css("padding-top"),10),i=parseInt(C.css("padding-bottom"),10),s=C.offset().top+t+a,r=C.height(),w&&(w=!1,y=!1,null==c&&(e.insertAfter(j),j.detach()),e.css({position:"",top:"",width:"",bottom:""}).removeClass(h),n=!0),d=e.offset().top-(parseInt(e.css("margin-top"),10)||0)-p,f=e.outerHeight(!0),g=e.css("float"),j&&j.css({width:e.outerWidth(!0),height:f,display:e.css("display"),"vertical-align":e.css("vertical-align"),float:g}),n?z():void 0})(),f!==r)return b=void 0,k=p,T=u,z=function(){var t,m,_,S,z,$;if(!v)return _=!1,null!=T&&(T-=1)<=0&&(T=u,A(),_=!0),_||o.height()===x||(A(),_=!0),S=a.scrollTop(),null!=b&&(m=S-b),b=S,w?(n&&(z=S+f+k>r+s,y&&!z&&(y=!1,e.css({position:"fixed",bottom:"",top:k}).trigger("sticky_kit:unbottom"))),S<d&&(w=!1,k=p,null==c&&("left"!==g&&"right"!==g||e.insertAfter(j),j.detach()),t={position:"",width:"",top:""},e.css(t).removeClass(h).trigger("sticky_kit:unstick")),l&&($=a.height(),f+p>$&&(y||(k-=m,k=Math.max($-f,k),k=Math.min(p,k),w&&e.css({top:k+"px"}))))):S>d&&(w=!0,(t={position:"fixed",top:k}).width="border-box"===e.css("box-sizing")?e.outerWidth()+"px":e.width()+"px",e.css(t).addClass(h),null==c&&(e.after(j),"left"!==g&&"right"!==g||j.append(e)),e.trigger("sticky_kit:stick")),w&&n&&(null==z&&(z=S+f+k>r+s),!y&&z)?(y=!0,"static"===C.css("position")&&C.css({position:"relative"}),e.css({position:"absolute",bottom:i,top:"auto"}).trigger("sticky_kit:bottom")):void 0},S=function(){return A(),z()},_=function(){if(v=!0,a.off("touchmove",z),a.off("scroll",z),a.off("resize",S),t(document.body).off("sticky_kit:recalc",S),e.off("sticky_kit:detach",_),e.removeData("sticky_kit"),e.css({position:"",bottom:"",top:"",width:""}),C.position("position",""),w)return null==c&&("left"!==g&&"right"!==g||e.insertAfter(j),j.remove()),e.removeClass(h)},a.on("touchmove",z),a.on("scroll",z),a.on("resize",S),t(document.body).on("sticky_kit:recalc",S),e.on("sticky_kit:detach",_),setTimeout(z,0)}},r=0,d=this.length;r<d;r++)i=this[r],s(t(i));return this}}).call(this)}),function(){var t=0,a={};function e(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,o),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),a[this.key]=this,t+=1}e.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},e.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete a[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(t){var e=[];for(var o in a)e.push(a[o]);for(var i=0,n=e.length;i<n;i++)e[i][t]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.Context.refreshAll();for(var t in a)a[t].enabled=!0;return this},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){function t(t){window.setTimeout(t,1e3/60)}var a=0,e={},o=window.Waypoint,i=window.onload;function n(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+a,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,e[t.waypointContextKey]=this,a+=1,o.windowContext||(o.windowContext=!0,o.windowContext=new n(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}n.prototype.add=function(t){var a=t.options.horizontal?"horizontal":"vertical";this.waypoints[a][t.key]=t,this.refresh()},n.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),a=this.Adapter.isEmptyObject(this.waypoints.vertical),o=this.element==this.element.window;t&&a&&!o&&(this.adapter.off(".waypoints"),delete e[this.key])},n.prototype.createThrottledResizeHandler=function(){var t=this;function a(){t.handleResize(),t.didResize=!1}this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,o.requestAnimationFrame(a))})},n.prototype.createThrottledScrollHandler=function(){var t=this;function a(){t.handleScroll(),t.didScroll=!1}this.adapter.on("scroll.waypoints",function(){t.didScroll&&!o.isTouch||(t.didScroll=!0,o.requestAnimationFrame(a))})},n.prototype.handleResize=function(){o.Context.refreshAll()},n.prototype.handleScroll=function(){var t={},a={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var e in a){var o=a[e],i=o.newScroll>o.oldScroll?o.forward:o.backward;for(var n in this.waypoints[e]){var s=this.waypoints[e][n];if(null!==s.triggerPoint){var r=o.oldScroll<s.triggerPoint,l=o.newScroll>=s.triggerPoint;(r&&l||!r&&!l)&&(s.queueTrigger(i),t[s.group.id]=s.group)}}}for(var d in t)t[d].flushTriggers();this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},n.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},n.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},n.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},n.prototype.destroy=function(){var t=[];for(var a in this.waypoints)for(var e in this.waypoints[a])t.push(this.waypoints[a][e]);for(var o=0,i=t.length;o<i;o++)t[o].destroy()},n.prototype.refresh=function(){var t,a=this.element==this.element.window,e=a?void 0:this.adapter.offset(),i={};this.handleScroll(),t={horizontal:{contextOffset:a?0:e.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:e.top,contextScroll:a?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var n in t){var s=t[n];for(var r in this.waypoints[n]){var l,d,c,p,m=this.waypoints[n][r],u=m.options.offset,h=m.triggerPoint,f=0,g=null==h;m.element!==m.element.window&&(f=m.adapter.offset()[s.offsetProp]),"function"==typeof u?u=u.apply(m):"string"==typeof u&&(u=parseFloat(u),m.options.offset.indexOf("%")>-1&&(u=Math.ceil(s.contextDimension*u/100))),l=s.contextScroll-s.contextOffset,m.triggerPoint=Math.floor(f+l-u),d=h<s.oldScroll,c=m.triggerPoint>=s.oldScroll,p=!d&&!c,!g&&(d&&c)?(m.queueTrigger(s.backward),i[m.group.id]=m.group):!g&&p?(m.queueTrigger(s.forward),i[m.group.id]=m.group):g&&s.oldScroll>=m.triggerPoint&&(m.queueTrigger(s.forward),i[m.group.id]=m.group)}}return o.requestAnimationFrame(function(){for(var t in i)i[t].flushTriggers()}),this},n.findOrCreateByElement=function(t){return n.findByElement(t)||new n(t)},n.refreshAll=function(){for(var t in e)e[t].refresh()},n.findByElement=function(t){return e[t.waypointContextKey]},window.onload=function(){i&&i(),n.refreshAll()},o.requestAnimationFrame=function(a){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,a)},o.Context=n}(),function(){function t(t,a){return t.triggerPoint-a.triggerPoint}function a(t,a){return a.triggerPoint-t.triggerPoint}var e={vertical:{},horizontal:{}},o=window.Waypoint;function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),e[this.axis][this.name]=this}i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var e in this.triggerQueues){var o=this.triggerQueues[e],i="up"===e||"left"===e;o.sort(i?a:t);for(var n=0,s=o.length;n<s;n+=1){var r=o[n];(r.options.continuous||n===o.length-1)&&r.trigger([e])}}this.clearTriggerQueues()},i.prototype.next=function(a){this.waypoints.sort(t);var e=o.Adapter.inArray(a,this.waypoints);return e===this.waypoints.length-1?null:this.waypoints[e+1]},i.prototype.previous=function(a){this.waypoints.sort(t);var e=o.Adapter.inArray(a,this.waypoints);return e?this.waypoints[e-1]:null},i.prototype.queueTrigger=function(t,a){this.triggerQueues[a].push(t)},i.prototype.remove=function(t){var a=o.Adapter.inArray(t,this.waypoints);a>-1&&this.waypoints.splice(a,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return e[t.axis][t.name]||new i(t)},o.Group=i}(),function(){var t=window.jQuery,a=window.Waypoint;function e(a){this.$element=t(a)}t.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(t,a){e.prototype[a]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[a].apply(this.$element,t)}}),t.each(["extend","inArray","isEmptyObject"],function(a,o){e[o]=t[o]}),a.adapters.push({name:"jquery",Adapter:e}),a.Adapter=e}(),function(){var t=window.Waypoint;function a(a){return function(){var e=[],o=arguments[0];return a.isFunction(arguments[0])&&((o=a.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var i=a.extend({},o,{element:this});"string"==typeof i.context&&(i.context=a(this).closest(i.context)[0]),e.push(new t(i))}),e}}window.jQuery&&(window.jQuery.fn.waypoint=a(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=a(window.Zepto))}();